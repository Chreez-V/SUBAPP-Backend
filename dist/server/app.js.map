{"version":3,"file":"app.js","sourceRoot":"/","sources":["server/app.ts"],"names":[],"mappings":"AAAA,OAAO,QAAQ,MAAM,UAAU,CAAC;AAChC,OAAO,eAAe,CAAC;AACvB,OAAO,EAAE,IAAI,EAAE,MAAM,yBAAyB,CAAC;AAC/C,OAAO,EAAE,GAAG,EAAE,MAAM,yBAAyB,CAAC;AAI9C,4CAA4C;AAC5C,MAAM,SAAS,GAAG,KAAK,IAAmB,EAAE;IAC1C,IAAI,CAAC;QACH,MAAM,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEzC,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;IAC9C,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;QACvD,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,KAAK,UAAU,IAAI;IACxB,IAAI,CAAC;QACH,MAAM,SAAS,EAAE,CAAC;QAElB,MAAM,MAAM,GAAG,MAAM,GAAG,EAAE,CAAC;QAE3B,MAAM,MAAM,CAAC,MAAM,CAAC;YAClB,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,IAAI;YACvB,IAAI,EAAE,IAAI,CAAC,IAAI,IAAI,SAAS;SAC7B,CAAC,CAAC;QAEH,OAAO,CAAC,GAAG,CAAC,gDAAgD,IAAI,CAAC,IAAI,IAAI,IAAI,OAAO,CAAC,CAAC;QAEtF,OAAO,CAAC,GAAG,CAAC,oCAAoC,IAAI,CAAC,IAAI,IAAI,IAAI,EAAE,CAAC,CAAC;IACvE,CAAC;IAAC,OAAO,CAAC,EAAE,CAAC;QACX,MAAM,YAAY,GAAG,CAAC,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,wBAAwB,CAAC;QAC/E,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QAC5B,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;AACH,CAAC;AAED,6DAA6D;AAC7D,cAAc;AAEd,IAAI,EAAE,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\nimport \"dotenv/config\";\r\nimport { envs } from \"../config/env.config.js\";\r\nimport { app } from \"../config/app.config.js\";\r\nimport { startMqtt } from \"../mqtt/plugins/mqttplugin.js\";\r\nimport cors from \"@fastify/cors\";\r\n\r\n// TODO: Move this to a database config file\r\nconst connectDB = async (): Promise<void> => {\r\n  try {\r\n    await mongoose.connect(envs.MONGODB_URL);\r\n\r\n    console.log(\"✅ Connected to MongoDB Atlas\");\r\n  } catch (error) {\r\n    console.error(\"❌ Error connecting to MongoDB:\", error);\r\n    process.exit(1);\r\n  }\r\n};\r\n\r\nexport async function main(): Promise<void> {\r\n  try {\r\n    await connectDB();\r\n\r\n    const server = await app();\r\n\r\n    await server.listen({\r\n      port: envs.PORT || 3500,\r\n      host: envs.HOST || \"0.0.0.0\"\r\n    });\r\n\r\n    console.log(`✅ Swagger docs available at http://localhost:${envs.PORT || 3500}/docs`);\r\n\r\n    console.log(`Server ready at http://localhost:${envs.PORT || 3500}`);\r\n  } catch (e) {\r\n    const errorMessage = e instanceof Error ? e.message : 'Unknown error occurred';\r\n    console.error(errorMessage);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n//start MQTT example plugin (connects, subscribes, publishes)\r\n//startMqtt();\r\n\r\nmain();\r\n"]}